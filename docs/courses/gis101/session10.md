---
title: جلسه ۱۰ - تحلیل شبکه
---
#جلسه 30 آذر: آشنایی با تحلیل شبکه
تحلیل شبکه به ما امکان می‌دهد سطح پوشش خدمات شهری را بر اساس دسترسی کاربران بررسی کنیم. دسترسی با فاصله خطی تفاوت دارد؛ دسترسی بر اساس مسیرها و معابر است و معمولاً در نمایش، شکل نامنظمی دارد، در حالی که نزدیکی بر اساس فاصله مستقیم و بدون توجه به راه‌ها است و شکل هندسی منظم دارد. راه‌ها یکی از موضوعات تحلیل شبکه هستند و موضوعات دیگر مانند شبکه آبو گاز هم در این تحلیل قابل بررسی هستند؛ اما متداول‌ترین نوع تحلیل شبکه، Route یا مسیریابی می‌باشد.

## 1-    ابزارهایی برای تحلیل شبکه:

برای تحلیل شبکه راه‌ها می‌توانیم از سایت[maps.openrouteservice.org](https://maps.openrouteservice.org)  استفاده
کنیم. در این سایت:

### ·       روی سه خط **Find Place**  کلیک می‌کنیم.
### ·       **Mode**  را روی ماشین می‌گذاریم.
### ·       روی **Reach** **** قرار می‌دهیم.
### ·       با علامت نقشه رو به روی **Find Place**  محدوده مورد نظر خود را مشخص می‌کنیم.
### ·       در کادر سمت چپ پارامترها، **Range** **** را روی ۵ و **Interval** **** را روی ۱ کیلومتر می‌گذاریم تا یک کیلومتر یک کیلومتر تا ۵ کیلومتر محاسبه شود.
این تحلیل، فاصله دسترسی بر اساس مسیرها را به ما می‌دهد.
### ·       خروجی تحلیل را با فرمت **GeoJSON** **** دانلود می‌کنیم.

## 2-    آماده‌سازی داده‌ها در ArcGIS Pro:
برای تحلیل شبکه نیاز داریم لایه‌های راه‌ها را به شکل خط (Line) داشته باشیم.

### ·       فایل حمل‌ونقل را باز می‌کنیم که شبکه معابر در آن قرار دارد.
### ·       در **Toolbox** مسیر زیر را طی می‌کنیم:
Conversion Tools > JSON > JSON to Feature

(ممکن است باگ داشته باشد، در این مرحله استفاده از داده‌های سایت به پایان می‌رسد)

## 3-    ایجاد  Network Dataset 

### ·       ArcGIS  برای تحلیل شبکه نیاز به **Network Dataset** **** دارد زیرا راه‌ها به صورت خط ساده هستند و نرم‌افزار باید بداند این لایه معبر است.
### ·       در پنل **Catalog** **** به قسمت **Database** **** می‌رویم. ArcGIS همه داده‌ها را در یک فولدر قرار می‌دهد.
### ·       روی **Geodatabase** **** راست کلیک می‌کنیم، گزینه **New > Feature Dataset** **** را انتخاب می‌کنیم.
### ·       نام Dataset را **Network** **** می‌گذاریم.
### ·       سیستم مختصات را روی **32639** **** تنظیم می‌کنیم.
### ·       سپس **Run** **** را می‌زنیم تا Dataset ساخته شود.

## 4-   وارد کردن شبکه معابر:

### ·       روی **Network** **** راست کلیک می‌کنیم، **Import > Feature Class** **** را انتخاب می‌کنیم.
### ·       **Input** : شبکه معابر را انتخاب می‌کنیم و **Run** **** را می‌زنیم.

## 5-   ساخت  Network Dataset  

### ·       روی **Network** **** راست کلیک، گزینه **New > New Network Dataset** **** را انتخاب و نام آن را **tehran_nd** **** می‌گذاریم.
### ·       **Source Feature Class** **** شبکه معابر را انتخاب می‌کنیم و تیک می‌زنیم.
### ·       **Elevation Field** **** را روی **No Elevation** **** قرار می‌دهیم.
### ·       بعد از ایجاد، در نقشه اطراف تهران یک باکس نمایش داده می‌شود.

## 6-   تنظیمات  Network Dataset  

### ·       روی **tehran_nd** **** راست کلیک و **Properties** **** را باز می‌کنیم.
### ·       به تب **Travel Attributes** **** می‌رویم، روی سه خط کلیک، **New** **** را می‌زنیم، نام آن را **Drive** **** گذاشته و **Type** **** را **Driving** **** انتخاب می‌کنیم.
### ·       سپس روی **tehran_nd** **** راست کلیک و **Build** **** را می‌زنیم تا Network Dataset آماده شود.

## 7-   انجام تحلیل دسترسی (Service Area) 

### ·       فایل بیمارستان‌ها را اضافه می‌کنیم.
### ·       به تب **Analysis > Network Analysis > Workflows** **** می‌رویم و **Service Area** **** را انتخاب می‌کنیم.
### ·       در تب **Service Area Layer**، **Import Facilities** **** را انتخاب و فایل بیمارستان‌ها را به عنوان **Input Location** **** اضافه می‌کنیم.
### ·       در قسمت **Cutoff** **** مقدار کیلومتری که در سایت مشخص کردیم را وارد می‌کنیم.
### ·       **Mode** **** را روی **Drive** **** قرار می‌دهیم.
### ·       مبدا و مقصد برای ما مهم است، به‌خصوص برای مسیرهای یک‌طرفه و دوطرفه.
### ·       در قسمت **Overlap** **** گزینه **Dissolve** **** را انتخاب می‌کنیم تا بافرها روی هم ادغام شوند. (برای بیمارستان‌ها به بافر 1000 متری نیاز داشتیم.)
### ·       روی **Run** **** کلیک می‌کنیم تا تحلیل انجام شود.
### ·       تحلیل شبکه خروجی موقت است، بنابراین لایه Polygon را **Export Features** می‌کنیم تا ذخیره شود.

**نکته****:**
### ·       برای هر پروژه نیازی به ایجاد Dataset جدید نداریم. از Network Dataset تهران برای پروژه‌های بعدی هم می‌توان استفاده کرد.
