---
title: جلسه ۶ - انتخاب
# جلسات 4 و 6 آبان: انتخاب (Selection)
در نرم‌افزار ArcGIS Pro، انتخاب یکی از ابزارهای مهم برای تحلیل داده‌های جغرافیایی است که در تب Map و در قسمت Select
قرار دارد. این کار می‌تواند از طریق پایگاه داده انجام شود.

# انتخاب بر اساس لایه‌های توصیفی (Select By Attribute)
در این قسمت، متدهای مختلفی برای مدیریت انتخاب‌ها داریم:

### ·       New: وقتی یک انتخاب جدید انجام می‌دهیم، انتخاب قبلی پاک می‌شود و فقط انتخاب جدید باقی می‌ماند.

### ·       Add: انتخاب‌های قبلی همچنان باقی می‌مانند و انتخاب‌های جدید به آن اضافه می‌شوند به عبارت دیگر، این انتخاب‌ها با هم اجتماع پیدا می‌کنند. (AUB)

### ·       Remove: از انتخاب قبلی، مواردی که در انتخاب جدید آمده‌اند حذف می‌شود. این انتخاب‌ها به نوعی تفاضل می‌شوند. (A-B)

### ·       From: این گزینه به ما اجازه می‌دهد از انتخاب اولیه، موارد خاصی را انتخاب کنیم. ( A اشتراک B)

## 1-   نوشتن Query در انتخاب

برای انتخاب موارد بر اساس ویژگی‌های خاص، می‌توانیم از Query ها استفاده کنیم. به عنوان مثال، کاربری‌ها و تمام قطعات مسکونی را انتخاب می‌کنیم. کوئری می‌تواند چند جمله داشته باشد که در این حالت، از Add Clause استفاده می‌کنیم و ویژگی جدید را وارد می‌کنیم. می‌توانیم از عملگرهای منطقی AND و OR برای ترکیب شروط مختلف استفاده کنیم.

### ·       AND: برای انتخاب‌هایی که همه شرایط را برآورده می‌کنند.

### ·       OR: برای انتخاب‌هایی که هر کدام از شرایط را برآورده می‌کنند.

**مثال:** انتخاب قطعات مسکونی که مساحت آن‌ها بیشتر از 500 متر مربع باشد:

Area > 500 AND LandUse = Residential

**تفاوت** **Null** **و** **Zero****:** 
کلمه Null به معنای **حساب نشده** است. ممکن است عدد Null برابر صفر یا هر عدد دیگر باشد؛ اما صفر به معنی مقدار صفر است و محاسبه شده است.
**نکته:** در پایگاه داده، نوع فیلد باید به درستی تعیین شود. برای داده‌های متنی (Text)، معمولا فقط از عملگرهای تساوی، عدم تساوی، Null، شروع با و پایان با و Contains the text استفاده می‌کنیم.

## 2-   توجه به انتخاب‌ها:
حتما باید توجه داشته باشیم که تمام انتخاب‌ها به درستی انجام شده باشند، زیرا محاسبات فقط برای موارد انتخاب شده انجام می‌شود.
اگر قبلا انتخاب‌هایی داشتیم و بخواهیم انتخاب جدیدی انجام دهیم، باید از Clear در تب Map در قسمت Select برای پاک کردن انتخاب‌های قبلی استفاده کنیم.

## 3-   گزارش‌گیری از ویژگی‌های خاص 
برای گزارش‌گیری از ویژگی‌هایی مانند کاربری‌هایی با مساحت‌های کمتر از 200 متر، باید مراحل زیر را دنبال کنیم:

### ·       انتخاب ویژگی‌ها با ابزار Select by Attribute طبق مراحل قبل

### ·       ساخت جدول خلاصه شده: بعد از انتخاب ویژگی‌ها روی Label در جدول راست کلیک کرده و آن را Summarize می‌کنیم.

### ·       استفاده از New Report
**نکته:** Definition Query به ما این امکان را می‌دهد که از ابتدا فقط داده‌هایی که با شرایط ما مطابقت دارند، نمایش داده شوند و به عبارت دیگر داده‌ها را فیلتر می‌کند.
**نکته:** بهترین راه برای دائمی کردن Selection، اضافه کردن فیلد با انتخاب‌های دلخواه می‌باشد. اکسپورت گرفتن باعث تعدد لایه‌ها می‌شود.

# انتخاب بر اساس لایه‌های ترسیمی (Select By Location)

## 4-   انتخاب لایه‌ها و تنظیم نوع رابطه:
ابتدا لایه‌ها مورد نظر را به نقشه اضافه می‌کنیم. در این آموزش، ما دو لایه داریم؛ لایه کاربری‌ها و گسل‌ها.
به عنوان مثال، می‌خواهیم برای انتخاب قطعات در فاصله 150 متری از گسل، از ابزار select by location استفاده کنیم:

### ·       از منوی select، گزینه select by location را انتخاب می‌کنیم.

### ·       در بخش Input Features لایه کاربری (لایه‌ای که می‌خواهیم روی آن انتخاب انجام دهیم) و در بخش selecting features لایه گسل (لایه‌ای که می‌خواهیم بر اساس موقعیت آن انتخاب کنیم) را انتخاب می‌کنیم.

### ·       در قسمت Relationship، گزینه Within a distance را انتخاب می‌کنیم و فاصله مورد نظر را در قسمت Search Distance وارد می‌کنیم. (150)

**گزینه‌های دیگر در** **Relationship****:**

### ·       Intersect: با انتخاب این گزینه، قطعاتی انتخاب می‌شوند که گسل دقیقا از روی آن‌ها گذشته است.

### ·       Contain: این گزینه قطعاتی را انتخاب می‌کند که کاملا در محدوده فاصله 150 متری گسل قرار می‌گیرند.

### ·       Have their center in: قطعاتی را انتخاب می‌کند که مرکز آن‌ها در محدوده مدنظر ما قرار ‌می‌گیرد.

## 5-   بررسی کاربری قطعات انتخاب شده

### ·       جدول کاربری را باز می‌کنیم.

### ·       روی فیلد Label کلیک راست کرده و Summarize را انتخاب می‌کنیم.

### ·       از کاربری‌ها و تعداد آن‌ها (Count) جدول خلاصه می‌گیریم. (به عنوان مثال 106 کاربری خدمات شهری روی گسل داریم)

## 6-   انتخاب با شرایط
به عنوان مثال، می‌خواهیم قطعاتی را انتخاب کنیم که در فاصله 150 متری از گسل هستند‌، ولی دقیقا روی گسل نیستند.
برای این منظور باید مراحل زیر را طی کنیم:

### ·       انتخاب قطعات با select by location در فاصله 150 متری گسل (در مراحل قبل توضیح داده شد)

### ·       حذف قطعاتی که روی گسل قرار می‌گیرند: دوباره از ابزار Select by location استفاده می‌کنیم. این بار در Relationship گزینه Intersect را انتخاب کرده تا قطعاتی که روی گسل قرار دارند انتخاب شوند و در قسمت Selection Type، گزینه Remove from the current selection را انتخاب می‌کنیم تا قطعات انتخاب شده در مرحله قبل، از انتخاب خارج شوند.

## 7-   دائمی کردن Selection ها
برای این منظور در جدول کاربری‌ها، یک فیلد جدید به نام Gosal اضافه می‌کنیم.
به عنوان مثال می‌خواهیم در جدول، مقابل قطعاتی که گسل از روی آن‌ها عبور کرده عدد 1 و مقابل قطعاتی که در فاصله 150 متری گسل هستند اما گسل از روی آن‌ها رد نشده عدد 2 قرار گیرد.

### ·       ابتدا قطعاتی که روی گسل‌ها هستند را انتخاب می‌کنیم (Relationship: Intersect، Selection Type: New Selection)

### ·       بعد از انتخاب شدن، روی فیلد Gosal کلیک راست می‌کنیم و Calculate Field را انتخاب می‌کنیم و فیلد Gosal را انتخاب می‌کنیم در کادر، 1 می‌گذاریم.

### ·       سپس قطعاتی که در 150 متری گسل قرار دارند اما روی گسل نیستند را انتخاب می‌کنیم. (در مرحله انتخاب با شرایط توضیح داده شد) در نهایت در کادر موجود در Calculate Field، رقم 2 می‌گذاریم.

### ·       همچنین برای نمایش بهتر در نقشه، در قسمت Symbology و با استفاده از Unique Values، برای هر کدام رنگ مناسب انتخاب می‌کنیم.

## 8-   اکسپورت داده‌ها به فرمت CSV و گزارش‌گیری در اکسل
بعد از اکسپورت داده‌ها به فرمت CSV طبق آموزش‌های قبل و وارد وارد شدن به بخش Pivot، باید اطلاعات سطر و ستون جدول گزارش را در قسمت PivotTable Field List تعیین کنیم.
در این مثال:

### ·        فیلد کاربری‌ها یا Label را به قسمت Rows یا سطرها می‌کشیم.

### ·       فیلد Gosal را به قسمت Columns یا ستون‌ها می‌کشیم.

### ·       فیلدی که مطمئن هستیم در آن مقدار وجود دارد، مانند فیلد Shape Area را به قسمت Values می‌کشیم. در حالت پیش‌فرض اعدادی که در جدول نمایش داده می‌شوند، مجموع هستند؛ پس روی Shape Area کلیک کرده و وارد قسمت Value Field Setting می‌شویم و به جای Sum، Count را انتخاب می‌کنیم تا تعداد قطعات را در جدول به ما نمایش دهد.
