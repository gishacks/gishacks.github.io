---
title: جلسه ۱۲ - ساخت نقشه آنلاین
--- 
> چه جمعیتی در حریم گسل قرار دارد؟

---

## ایجاد حریم (Buffer)
مثل جلسه قبل، برای **گسل** یک **Buffer با فاصله‌ی ۱۵۰ متر** ایجاد می‌کنیم.
## بررسی زونینگ
- از قسمت طرح توسعه، زونینگ طرح تفصیلی را باز می‌کنیم.
- برای داشتن لایه زونینگ بدون گسل از ابزار **Erase** استفاده می‌کنیم. 
**تنظیمات ابزار Erase:**
- **Input Feature:** zoning  
- **Erase Feature:** gosal_buffer  
- تیک بافر و زونینگ را از قسمت **contents** برمیداریم. 
---

## بررسی پهنه‌های در حریم گسل 
> از چه پهنه‌هایی و چه سطحی از پهنه‌ها در حریم گسل قرار دارند؟

باید اشتراک (Intersection) بین **زونینگ اصلی** و **بافر گسل** را بگیریم.
- در ابزار `Erase` ترتیب نوشتن اهمیت داشت اما در `Intersect` فرقی ندارد چون اشتراک می‌گیریم.
### ابزار Intersect
چون هدف، یافتن اشتراک است:
- یکی از لایه‌ها: **گسل بافر (gosal_buffer)**  
- دیگری: **زونینگ اصلی (zoning)**  

---

## گزارش‌گیری از نتایج
1. روی **جدول لایه‌ی Intersect** راست‌کلیک می‌کنیم.  
2. گزینه‌ی **Summarize** را انتخاب می‌کنیم.  
3. تنظیمات:
   - **Field 1:** label  
   - **Field 2:** shape_area → Sum  


---

## ابزار Identity 
- برخلاف Erase، هیچ چیزی حذف نمی‌شود، فقط مرزها روی هم بریده می‌شوند.
- - **Input Feature:** zoning  
- **Identity Feature:** gosal_buffer  

می‌خوایم بفهمیم:
> چند درصد از مساحت محلات در محدوده‌ی گسل قرار دارد؟

### مراحل:
1. لایه‌ی **محلات (mahalat)** را اضافه می‌کنیم.  
2. ابزار **Identity** را اجرا می‌کنیم:
   - **Input Feature:** mahalat  
   - **Identity Feature:** gosal_buffer  
3. جدول‌های **محلات Identity** و **گسل بافر** را باز می‌کنیم.
   - آن‍هایی که در بافر برایشان `Distance` صفر نیست، واقع در گسلند.
### رنگ گذاشتن بر اساس **Buffer Distance**
 1. روی لایه **محلات Identity** کلیک راست می‌کنیم.
 2. در قسمت **Symbology**، گزینه **Unique Value** را انتخاب می‌کنیم.
 3. در فیلد اول `Buff_Dist` قرار می‌دهیم. 
---

## خروجی گرفتن
1. در قسمت `Table` روی **Export Table** کلیک می‌کنیم.
2. در قسمت `Output` در پنجره باز شده محل ذخیره شدن را انتخاب کرده و فرمت را روی csv می‌گذاریم.
3. در اکسل از `pivot` استفاده می‌کنیم:
   - در قسمت `rows` باید `mah-id` و برای ستون‌ها `buff_dist` را قرار دهیم.
   - Values: Shape area
   - Value field setting: sum
   - Show values as= % of row total
   - اگر فرمت اعداد تکست بود باید آن را تغییر داده و به عنوان عدد معرفی کنیم.
