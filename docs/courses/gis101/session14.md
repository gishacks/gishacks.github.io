---
title: جلسه 14  
---

## 1) جوین مکانی بین محلات و بیمارستان‌ها  
*«تو هر محله چندتا بیمارستان وجود داره؟»*

### مراحل:
1. لایه‌های **محلات** و **بیمارستان‌** را روشن می‌کنیم.
   - این دو لایه در حال حاضر هیچ فیلد مشترکی ندارند، تنها موقعیت مکانی آن‌ها یکسان است.
   - می‌خواهیم بر اساس این موقعیت مکانی مشترک اطلاعات بیمارستان را به محلات بدهیم.
   - لایه مقصد محلات و مبدا بیمارستان است. 
3. روی لایه مقصد (**محلات**) رایت‌کلیک می‌کنیم:  
   **Joins and Relates → Add Spatial Join**
4. تنظیمات:
   - **Target layer:** محلات  
   - **Join layer:** بیمارستان  
   - رابطه مکانی: **INTERSECT**  
   - در این‌جا نیاز به تعیین شعاع نیست. 
5. پس از این مراحل فیلدهای جدید از بیمارستان به جدول اضافه می‌شوند.
6. فیلد جدیدی به نام `hospital` می‌سازیم و سیو می‌کنیم.
7. روی این فیلد جدید رایت‌کلیک می‌کنیم.
8. در قسمت **calculate field** ، گزینه **Join count** را انتخاب می‌کنیم.

### دائمی کردن فیلد تعداد
- روی جدول محلات رایت‌کلیک می‌کنیم.
- سپس برای حذف جوین:  
  **Joins and Relates → Remove All Joins**

---

## 2) محاسبه جمعیت هر محله  
مثل مرحله قبل ولی این بار لایه **بلوک‌های جمعیتی** را جوین می‌کنیم.
- این بار **Target** را جمعیت انتخاب می‌کنیم.

### مراحل:
1. حذف جوین قبلی  
   **Remove All Joins**
  
3. در بخش فیلدها:
   - روی گزینه فیلدها کلیک می‌کنیم → **Remove All**
   - سپس **Add Field**:
     - نام فیلد: Population  
     - نوع آمار: **SUM** (جمع جمعیت بلوک‌ها)

---

## 3) گزارش‌نویسی نهایی برای هر محله  
بعد از به‌دست آوردن:
- درصد حریم گسل  
- تعداد بیمارستان‌ها  
- جمعیت

می‌توان تحلیل آسیب‌پذیری برای هر محله نوشت.

---

## 4) خروجی نقشه‌ها 
- در قسمت `symbology` گزینه `graduated colors` را برای مشخص کردن طیف‌های رنگی انتخاب می‌کنیم. 
### ۱) نقشه حریم گسل  
- طیف رنگ: **قرمز → سبز**  
- هرچه نزدیک‌تر به گسل: **قرمزتر**

### ۲) نقشه تعداد بیمارستان‌ها  
- طیف رنگ **برعکس:**  
  - محلات بدون/کم بیمارستان → **قرمز**  
  - محلات دارای بیمارستان زیاد → **سبز**

### ۳) نقشه تراکم جمعیت  
- نرمال‌سازی جمعیت بر اساس **مساحت شیپ (Area)**  
- نمایش با طیف: **قرمز → سبز**  
- تراکم زیاد = **قرمز**



---
