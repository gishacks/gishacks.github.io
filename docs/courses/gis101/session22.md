---
title: جلسه 22
---
## مرحله سوم و چهارم تحلیل مطلوبیت  
### وزن‌دهی و روی‌هم‌اندازی (Weighted Overlay)

در این مرحله از تحلیل مطلوبیت، وزن‌دهی معیارها و روی‌هم‌اندازی آن‌ها به‌صورت هم‌زمان انجام می‌شود.  
در GIS برای این کار از دستور **Weighted Overlay** استفاده می‌کنیم.

---

### مراحل اجرای Weighted Overlay

1. اجرای ابزار **Weighted Overlay**
2. در پنجره‌ی بازشده:
   - **Scale** را معرفی می‌کنیم  
     (همان مقیاسی که قبلاً برای Reclassify استفاده کرده بودیم).
3. در همان پنجره، کنار بخش Rasterها:
   - روی فلش رو به پایین کلیک می‌کنیم.
   - لایه‌های Reclassify شده را انتخاب می‌کنیم.
4. تعیین اهمیت معیارها:
   - در بخش درصد-مساوی دارد، میزان اهمیت هر معیار را وارد می‌کنیم.
   - مجموع درصدها باید ۱۰۰ باشد.
   - مثال:
     - فاصله از گسل: **۷۰٪**
     - شیب: **۳۰٪**
5. روی **OK** کلیک کرده و ابزار را **Run** می‌کنیم.
6. پس از تولید خروجی:
   - روی لایه‌ی خروجی راست‌کلیک می‌کنیم.
   - گزینه‌ی **Add to Display** را می‌زنیم.
   - به محیط Map می‌رویم و نتیجه را مشاهده می‌کنیم.
7. در پایان، **Model** را ذخیره می‌کنیم.

---

### سؤال تحلیل
**مطلوب‌ترین محله برای ساخت مدرسه کجاست؟**

---

## تحلیل پارسل‌های بایر

1. لایه‌ی **کاربری اراضی** را اضافه می‌کنیم.
2. **Attribute Table** لایه را باز می‌کنیم.
3. فقط پارسل‌های بایر را انتخاب می‌کنیم:
   - استفاده از **Select By Attribute**
4. گرفتن خروجی از پارسل‌های بایر:
   - راست‌کلیک روی لایه کاربری  
   - `Data > Export > Export Features`

---

## محاسبه امتیاز پارسل‌های بایر

برای محاسبه امتیاز هر پارسل بایر از دستور **Zonal Statistics as Table** استفاده می‌کنیم.

### تنظیمات ابزار Zonal Statistics as Table

- **Input Feature Zone Data**:  
  خروجی پارسل‌های بایر (Export Feature)
- **Input Value Raster**:  
  خروجی تحلیل مطلوبیت (Weighted Overlay)
- **Zone Field**:  
  فیلد منحصر‌به‌فرد هر پارسل → `OBJECTID`
- **Statistics Type**:  
  `ALL`

سپس ابزار را **Run** می‌کنیم.
- جدولی در انتهای لیست `contents` ساخته می‌شود که تعداد پارسل‌ها در حالت عادی باید با سلکشن بایر یکی شود اما ما `cell size` را 100 در 100 در نظر گرفته بودیم و در نتیجه بعضی‌ها به قدری کوچک بودند که حساب نشدند.
- در نتیجه بهتر است که `cell size` را کوچک انتخاب کنیم: مثلا 10 در 10


---

## ابزار جوین
می‌خواهیم اطلاعات جدول زونال را به جدول بایرها `join` کنیم.
1. اجرای **Join**:
   - **Input Field**: `OBJECTID`
   - **Join Field**: `OBJECTID_1`
2. تیک گزینه‌ی **Keep All Input Records** را برمی‌داریم  
   (تا فقط رکوردهای موردنیاز باقی بمانند).

---

## تحلیل نهایی و نمایش نتایج

- فیلد **MEAN** را از بزرگ به کوچک `Sort` می‌کنیم.
- بر اساس فیلد **MEAN**:
  - **Symbology** را تنظیم می‌کنیم.

### نکته تحلیلی
- برای محاسبه‌ی **میزان بارش یک منطقه**:
  - باید از **SUM** استفاده کنیم نه **MEAN**
 


### جمع‌بندی
فرایند واقعی تحلیل مطلوبیت بسیار پیچیده‌تر و گسترده‌تر است،  
اما در این پروژه، فرایند تحلیل در همین مرحله به پایان می‌رسد.
